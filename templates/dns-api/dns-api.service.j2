[Unit]
Description=Home DNS API Flask Server
After=network.target

[Service]
User={{dns_api_service_user}}
Group={{dns_api_service_group}}
# User=root
# Group=root

WorkingDirectory={{named_config_path}}/{{dns_api_name}}
{%if dns_api_debug_mode %}
Environment=API_DEBUG=True
Environment=FLASK_DEBUG=1
{%endif%}
Environment=DNS_SERVICE={{named_service_name}}
Environment=LOCAL_DNS_FILE={{dns_api_local_dns_file}}
Environment=FLASK_APP={{named_config_path}}/{{dns_api_name}}/{{dns_api_service_flask_app}}
ExecStart={{dns_api_service_flask_executable}} run --host=0.0.0.0 --port={{dns_api_service_port}}
Restart=always

[Install]
WantedBy=multi-user.target
